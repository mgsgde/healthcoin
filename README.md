
# Healthcoin 
Folgendes Projekt wurde im Zuge der Vorlesung "Ubiquitäre Informationstechnologien" (gehalten von Prof. Dr. Michael Beigl) erstellt. Mit dem **Unified Design Thinking Model** wurde die Healthcoin Idee erarbeitet.

## 1. Discover: Problemfindung mit der 10+10 Methode 

1. Economy of things (z.B. bezahlt ein Auto automatisch eine E-Ladesäule, Pay per Use Verfahren für Maschinen)
- Engineer: 6
- Managmenet: 3
- Production: 5
- Marketing: 3
- User: 3

---


2. Hardware wallet (arduino speichert private key zur Signierung von Transktionen )
- Engineer: 6
- Managmenet: 10
- Production: 8
- Marketing: 10
- User: 10
- **Existiert bereits.**

---

3. Gerät welches Schritte zählt und bei Erreichen einer Mindest-Schrittanzahl Crypto-Geld an den Nutzer auszahlt.  
- Engineer: 7
- Managmenet: 5
- Production: 7
- Marketing: 8
- User: 7

---

4. Gerät welches Türen öffnet sobald Crypto-Geld überwiesen wurde (z.B. Car Sharing, Hotelzimmer ...) 
- Engineer: 6
- Managmenet: 3
- Production: 4
- Marketing: 4
- User: 3

---

5. Gerät, welches an einem Boxhandschuh befestigt ist und geschwindigkeit und beschleunigung misst.
- Engineer: 9
- Managmenet: 10
- Production: 9
- Marketing: 1
- User: 1

---

6. Gerät welches via GPS Geräte ortet.
- Engineer: 8
- Managmenet: 7
- Production: 7
- Marketing: 7
- User: 8
- **Existiert bereits.**

---

7. LED Weihnachts Beleuchtung, welche einen QR code oder URL anzeigen kann. Der QR code bzw die URL verweisen auf eine Crypto-Adresse, an welche man crypto Geld zahlen kann. Wenn eine Zahlung eintrifft, dann geht die Lichterkette an und ein Lichtspiel wird abgespielt
- Engineer: 5
- Managmenet: 10
- Production: 2
- Marketing: 7
- User: 7

## 2. Emphatize: 

### 2.1 First Sketch
 ![Image of components](/images/sketch.healthcoin.jpg)

### 2.2 User Stories

- Ich bin ein 25 Jahre alter sportlicher und technik begeisterter Student. Da ich mich nicht mehr über meine Eltern versichern kann, bin ich auf der Suche nach einer neuen coolen Krankenversicherung.   
- Ich bin jung und sportlich. Da ich regelmäßig joggen gehe möchte ich weniger für meine Krankenkasse bezahlen als mein Arbeitskollege, der keinerlei Sport betreibt. 

### 2.3 Experten Meinung

- Feedback von einem Debeka Mitarbeiter: "Krankenkassen unterliegen dem Diskriminierungsverbot und die Appliance diskriminiert unsportliche Menschen."

### 2.4 How do you make Business

#### Size of Market & Market Potential

- Aufgrund der Krankenversicherungspflicht sind alle deutsche Staatsangehörige potentielle Kunden der Healthcoin Applikation
(Quelle: https://de.statista.com/statistik/daten/studie/155823/umfrage/gkv-pkv-mitglieder-und-versichertenzahl-im-vergleich/)

- alle Krankenversicherungen (Plattform Gedanke)  
- Endkunden im Alter von 18-25 Jahren: 7.286.000 
(Quelle: https://de.statista.com/statistik/daten/studie/1351/umfrage/altersstruktur-der-bevoelkerung-deutschlands/)

#### Growth of Market
- Bevölerkungsgruppe der 18 bis 25 Jährigen wird von Jahr zu Jahr kleiner => Schrumpfender Markt
(Quelle: https://de.statista.com/statistik/daten/studie/248090/umfrage/entwicklung-der-bevoelkerungsstruktur-deutschlands-nach-altersgruppen/)


#### Competitors

- Domain name healthcoin.com ist verfügbar 
(Quelle: https://heathcoin.com/de-de)

- Jede größere Krankenversicherung betreibt ihr eigenes Bonusprogramm. Die Bonusprogramme sind meistens jedoch noch nicht digitalisiert. Es besteht zudem noch kein einheitliches industrieweites Bonusprogramm (wie z.B. paypal im Bereich des Einzelhandels). Healthcoins können sich dank Blockchain Technologie zu einem industrieweiten Standard entwickeln. 
(Quelle: https://www.n-tv.de/ratgeber/Lohnt-sich-das-Punktesammeln-article16795776.html, https://www.healthmiles.de/index.html)

- Techniker Krankenkasse betreibt ein Bonusprogramm
(Quelle: https://www.tk.de/techniker/service/gesundheit-und-medizin/praevention-und-frueherkennung/tk-bonusprogramm/programm-2010356)

- Payback könnte ebenfalls zu einem Wettbewerber werden
(Quelle: https://www.payback.net/)

#### Problems entering the market

- Angewiesen auf Krankenversicherungen oder Arbeitgeber, welche bereit sind Geld für ihre Kunden bzw. Arbeitnehmer zu zahlen. Ohne jene Parteien sind die Healthcoins nichts wert.   

- Datenschutz im Bereich Gesundheitsdaten ist bedeutend

#### How do you make Business

- gratis Software	
- Smart Watches werden von Krankenversicherungen finanziert
- "Subscription": 
	- Lizenzgebühren für die Keys mit denen die Healthcoins generiert werden können
- "Pay as you go":
	- Transaktionskosten

#### Growth Strategy

- je größer die Plattform, desto mehr Transaktionen, desto mehr Profit => Konsortium von Unternehmen die bei Healthcoin mitmachen vergrößern

### 2.5 Key Values

**Nutzer:**
- Die Nutzer können die Healthcoins gegen Waren und Dienstleistungen eintauschen und werden somit für die sportliche Aktivität belohnt 
- Durch Healthcoins haben Nutzer mehr Spaß am Laufen (Stichwort: Gamification)

**Krankenversicherungen:**
- Krankenkassen profitieren von gesünderen Kunden
- Krankenkassen erhalten mit der Healthcoin eine Schnittstelle zum Kunden
- Vertriebsgag zur Akquisition von jungen sportlichen Neukunden
- Krankenkassen können Healthcoins für den Vertrieb von Waren und Dienstleistungen nutzen. 

**Arbeitgeber:**
- Reduktion der Krankheitstage der Mitarbeiter
- Image => Arbeitnehmer Akquisition

**Generell:**
- Die dezentrale Blockchain Technologie kann es der Healthcoin erleichtern sich als Branchenstandard durchzusetzen. Dies kann widerum zu positiven Netzwerkeffekten führen (Stichwort: Metcalfs Law). 
- Die Dokumentation von Fitness Aktivitäten auf der Blockchain in Form von Healthcoins kann der erste Schritt sein in Richtung einer digitalen Gesundheitsakte. 

## 3. Define: Healthcoin

Ein mobiles Endgerät (z.B. in der Form einer smart watch) ausgestattet mit Bewegungssensoren erfasst die Fitness Aktivitäten einer Person und schickt der Person zur Belohnung regelmäßig via Blockchain Protokoll Tokens. Die Tokens heißen "Healthcoins". Das mobile Endgerät und die Healthcoins werden von Unternehmen herausgegeben werden, welche ein Interesse an der Gesundheit der jeweiligen Person haben (z.B. der Arbeitgeber oder die Krankenkasse). Die Healthcoins können gegen Waren und Dienstleistungen eingetauscht werden (z.B. Waren und Dienstleistungen des Unternehmens-Konsortiums, welches die Healthcoins via Blockchain emittiert). 

## 4. Ideate: Alternative Lösungsmöglichkeiten
 ![Image of components](/images/ideateLösungen.healthcoin.jpg)

## 5. Prototype

### Funktionsweise

Der Nutzer trägt das mobile Endgerät beispielsweise in Form von einer smart watch während er läuft. Das mobile Endgerät ist via ESP32-DevKitC Board über WiFi mit dem Internet verbunden. Das mobile Endgerät erfasst die Bewegungsdaten mit einem Beschleunigungsmesser und Kreiselkompass. Einmal pro Sekunde werden Bewegungsdaten erfasst. Wenn das mobile Endgerät anhand der Bewegungsdaten auf eine Fitness Aktivität zurückschließen kann, dann bekommt der Nutzer einen Punkt. Wenn der Nutzer eine bestimmte Anzahl von Punkten erreicht hat, dann sendet das mobile Endgerät via HTTP ein Signal an den Server. Der Server wird von einem der Herausgeber der Healthcoins betrieben. Der Server erstellt und signiert eine Blockchain Transaktion, welche dem Nutzer eine Healthcoin zuspricht. Die Transaktion wird via HTTPS an den Blockchain Node Betreiber Infura geschickt. Infura propagiert die Transaktion anschließend im Blockchain Netzwerk. Sobald die Transaktion in die Blockchain eingearbeitet wurde, kann der Nutzer mit einem Wallet seiner Wahl seine Healthcoins verwalten (siehe Bild 2). Der Healthcoin Token Contract ist [hier](https://etherscan.io/token/0x39533ce7589574205f20b34c028fe4f30ab68e3b) einsehbar.       

### Architektur

![Image of architecture](/images/architecture.jpg)

### Schema
![Image of components](/images/healthcoin.components.fritzing.png)

### Komponenten:

- Arduino Mega
- MPU-6050 Accelerometer + Gyro
- Logic-Level-Shifter (5V zu 3.3V)
- Akku
- ESP32-DevKitC
- LCD1602 Display 

**Anmerkung**: 
Die Auswahl der Komponenten wurde in erster Linie unter dem Gesichtspunkt der einfachen Handhabe und Verfügbarkeit getroffen. So ist der Arduino Mega Microcontroller überflüssig, da der ESP32 Microcontroller auf dem ESP32-DevKitC Board zur Ansteuerung des MPU-6050 Moduls ausreicht. Zudem kann das ESP32-DevKitC Development Board durch einen ESP32-WROOM-32 Microcontroller ersetzt werden. Desweiteren ist der Akku üderdimensioniert. 

### Prototyp
![Image of components](/images/healthcoin.components.foto.png)

### Mobiles Wallet zur Verwaltung der Healthcoins

![Image of wallet1](/images/wallet1.png)

### Todo

1. Es sollte eine mobile Applikation implementiert werden, so dass die Appliance nicht auf WiFi angewiesen ist und via Bluetooth über ein Smartphone mit dem Server kommunizieren kann. 
2. Der Nutzer sollte seine Blockchain Adresse eingeben können. Momentan ist die Adresse des Nutzers "hard gecoded" auf dem Server.
3. Der Server Aufruf von der Appliance erfolgt unverschlüsselt via HTTP. Es sollte hier eine beidseitige Authentifizierung statt finden und Daten sollten verschlüsselt versendet werden.
4. Die Funktion, welche auf Basis der Bewegungsdaten auf die Fitness Aktivität schließt, sollte verbessert werden. Momentan wird lediglich geprüft ob die Summe der x,y,z Beschleunigungsdaten einen (durch Ausprobieren bestimmten) Schwellenwert überschreitet. 
5. Die Auswahl der Elektronik Komponenten sollte unter ökonomischen und funktionellen Gesichtspunkten neu durchdacht werden. 

## 6. Testen und Bewerten

### 6.1 Feldtest
**TODO**

### 6.2 Kostenberechnung via COSYSMO (Constructive Systems Engineering Cost Model)

**System Requirements**:
1. The Appliance shall count steps
2. The Appliance shall show the progress of counting steps on a Display
3. The Appliance shall communicate via wlan with a webserver
4. The Appliance shall authenticate to the webserver
5. The Appliance shall have its own mobile power supply
6. The Webserver shall send transactions to a Blockchain node

**Interfaces:**
1. arduino to esp32 module
2. esp32 module to werbserver
3. webserver to blockchain node
4. arduino to LCD Display
5. arduino to Accelerometer

**Algorithms:**
1. step counting algorithms

**Operations Scenarios:**
1. Walk with Appliance and check whether Display shows step count
2. Walk with Appliance and check whether tokens get transferred

**Effort Multipliers:**
1. high Technology Risk

**COSYSMO Ergebnis:**
 ![Image of components](/images/healthcoin.cosysmo.jpg)

**Kritik**
- Ursprung und Alter der Trainingsdaten zur Bestimmung der Parameter nicht bekannt 
- Güte des Systems nicht spezifiert

### 6.3 Bepreisung mit 50% Daumenregel

**Hardware Costs:** 

- ESP32 ESP-WROOM-32 IoT Wifi Wlan BLE Module+ESP-32S Adapter Board
- $ 3.31
- Quelle: https://www.aliexpress.com

---

- GY-521 MPU-6050 MPU6050 Module 3 Axis analog gyro sensors+ 3 Axis Accelerometer Module
- $ 0.75 
- Quelle: https://www.aliexpress.com
---

- 4 Channel Bi-Directional Logic Level Shifter Converter 3.3V-5V Logics Level Converter
- $ 0.25
- Quelle: https://www.aliexpress.com
---

- 1PCS LCD1602 1602 module green screen 16x2 Character LCD Display Module.1602 5V green screen and white code for arduino
- $ 1.15
- Quelle: https://www.aliexpress.com
---

- 2 Pack Brand New SUPER Big Capacity AA 1.5V lithium iron batteries.High power Long shelf life digital Camera, radio ba
- $ 3.56
- Quelle: https://www.aliexpress.com
---

- AA Size Power Battery Storage Case Box Holder Leads With 2 Slots
- $ 0.58 
- Quelle: https://www.aliexpress.com

**Total Costs: $ 9.60** 

**50% Rule of Thumb: $ 19.2** (Direct Costs, Gross Margin, Average Discount)

**Anmerkung:**
Da die Auswahl der Komponenten in erster Linie unter dem Gesichtspunkt der einfachen Handhabe und Verfügbarkeit getroffen wurde, ist jene Rechnung nur als Beispielrechnung anzusehen. Zudem wurde nicht berücksichtigt, dass alle Komponenten in einer smart watch verbaut werden sollen    

### 6.4 Geschäftsmodell

 ![Image of components](/images/healthcoin.businessmodelcanvas.jpg)

# Sonstiges

## Kritik an Cocomo (Constructive Cost Model)

- devops werden nicht berücksichtigt (via k8s deployen, infura Zugang besorgen)
- Regressionsdaten sind veraltet
- Boehm hat die Regression mit 64 bzw 161 Messungen durchgeführt. Für so ein komplexes Problem sind das viel zu wenige Messungen.
- Derekt Jones kam zu anderen Ergebnissen, so hat boehm z.B. die outlier nicht berücksichtigtg (http://shape-of-code.coding-guidelines.com/2016/05/19/cocomo-how-not-to-fit-a-model-to-data/)
- Derek Jones hat Fehler in der orginalen Analyse aufgedeckt (http://shape-of-code.coding-guidelines.com/2016/05/19/cocomo-how-not-to-fit-a-model-to-data/)
- Annahme eines Polynomiellen Zusammenhanges nicht bewiesen?


## Scrum 

### Product Backlog (Product Owner)

1. Als Nutzer möchte ich für das Laufen einer bestimmten Strecke tokens überwiesen bekommen
2. Als Nutzer möchte ich sehen wie viel ich noch joggen muss um tokens überwiesen zu bekommen
3. Als Nutzer möchte ich die Tokens gegen Waren und Diestleistungen eintauschen könnnen
4. Als Nutzer möchte ich die Anzahl an Tokens die ich bereits bekommen habe einsehen können
5. Als Nutzer möchte ich die appliance wie eine Uhr am Handegelenk tragen können
6. Als Nutzer möchte ich die appliance via usb aufladen können
7. Als Nutzer möchte ich Gewissheit haben, dass meine Daten nicht an fremde Dritte weitergegeben werden
8. Als Versicherer möchte ich sämtliche Fitness und Token Daten grafisch aufbereitet einsehen können

### Ausgewählte Features für Sprint 1 (Developer) 

#### User Story 1:
- Als Nutzer möchte ich für das Laufen einer bestimmten Strecke tokens überwiesen bekommen
	- The Appliance shall count steps
	- The Appliance shall communicate via wlan with a webserver
	- The Appliance shall authenticate to the webserver
	- The Webserver shall send transactions to a Blockchain node

#### User Story 2:
- Als Nutzer möchte ich sehen wie viel ich noch joggen muss um tokens überwiesen zu bekommen
	- The Appliance shall show the progress of counting steps on a Display

### Definition of Done
Backlog Item muss im Zuge einer mündlichen Prüfung bzw. eines Pitches funktionieren. Es gebraucht keiner Dokumenation und es gebraucht keiner Unit Tests. 


### Human Centered Design

- Mental Model:
	- Smartphone, welches wie eine herkömmliche Uhr getragen wird

- Feedback:
	- Fehlermeldungen via screen anzeige

- How does a user pick up information:
	- visual
	- vibration

- What can go wrong
	- kein bluetooth bzw. wifi

- unterbewusste Prozess
	- auf Uhr schauen => sollte wahrscheinlich als Startbildschirm die Uhrzeit anzeigen

- bewusste Prozesse 
	- Handy Wallet installieren
	- Healthcoins an der Kasse einlösen via Hand Wallet

- Design Model:
	- Experience & Interaction